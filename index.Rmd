---
title: "Home"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T, warning = F, message = F)
```



```{r pkgs, eval = F}
# Still need to figure out what this is actually doing
if (!require(librarian)){
  remotes::install_github("DesiQuintans/librarian")
  library(librarian)
}
shelf(
  # database
  DBI, RPostgres,
  # spatial
  ggmap, leaflet, 
  r-spatial/mapview,
  sf, sp,
  # tidyverse
  dplyr, purrr, readr, tibble, tidyr,
  # todo: use these
  # googledrive,
  # report
  DT, gt, htmltools, htmlwidgets, kableExtra, knitr, markdown, rmarkdown, shiny, webshot,
  # utility
  fs, glue, here, png, scales, stringr, urltools)
here <- here::here
```

# References

  - [R Markdown Basics](https://rmarkdown.rstudio.com/authoring_basics.html)
  - [R Markdown Reference Guide](https://bookdown.org/yihui/rmarkdown/)
  - [Flexdashboard](https://rmarkdown.rstudio.com/flexdashboard/)
  - [Awesome public datasets](https://github.com/awesomedata/awesome-public-datasets)
  
# Languages

## R
```{r, eval=F}

```


## SQL

### Option 1
Create connection chunk, then call connection in each subsequent chunk.
```{r connSQL, class.source='fold-show'}
library(DBI)

pass <- readLines("../../pwd.txt")

db = dbConnect(
  RPostgres::Postgres(),
  dbname   = "personal",
  host     = "localhost",
  port     = 5432,
  user     = "cgrant",
  password = pass
)
```

```{sql, connection=db, eval=F}
select * from sleepdata
```

### Option 2
Set default connection in the setup chunk (pretend its the setup chunk).
```{r setup-v2, eval=F, class.source='fold-show'}
library(DBI)
db = dbConnect(
  RPostgres::Postgres(),
  dbname   = "personal",
  host     = "localhost",
  port     = 5432,
  user     = "cgrant",
  password = pass
)
knitr::opts_chunk$set(connection = "db")
```

Then you dont have to specify the connection for each chunk.
```{sql, eval=F}
select * from sleepdata
```


## Python
To use the Python engine, you need to call `library(reticulate)` [link](https://rstudio.github.io/reticulate/)
```{r, class.source='fold-show'}
# install.packages("reticulate")
library(reticulate)

# Use specific Python installation
# use_python("C:/Python37")

# Use conda environment
use_condaenv("dev")
```

Now you can run Python code
```{python, class.source='fold-show'}
x = 4 * 4
print(x)
```

You can import libraries as normal
```{python, class.source='fold-show'}
import pandas as pd

vals = {"col1": ['a', 'b', 'c', 'd'], "col2": [1, 10, 100, 1000]}
df = pd.DataFrame(vals)
print(df)
```

Access objects created within Python chunks from R using `py$<var>`
```{r, class.source='fold-show'}
library(DT)
datatable(py$df)
```


