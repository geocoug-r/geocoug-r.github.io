---
title: "Home"
output:
  html_document:
    toc: TRUE
    #code_folding: hide
editor_options:
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Packages

```{r pkgs, eval = F}
if (!require(librarian)){
  remotes::install_github("DesiQuintans/librarian")
  library(librarian)
}
shelf(
  # database
  DBI, RPostgres,
  # spatial
  ggmap, leaflet, 
  r-spatial/mapview, # https://github.com/r-spatial/mapview/issues/324
  sf, sp,
  # tidyverse
  dplyr, purrr, readr, tibble, tidyr,
  # todo: use these
  # googledrive,
  # report
  DT, gt, htmltools, htmlwidgets, kableExtra, knitr, markdown, rmarkdown, shiny, webshot,
  # utility
  fs, glue, here, png, scales, stringr, urltools)
here <- here::here
```

<br>

# References

  - [R Markdown Basics](https://rmarkdown.rstudio.com/authoring_basics.html)
  - [R Markdown Reference Guide](https://bookdown.org/yihui/rmarkdown/)
  - [Flexdashboard](https://rmarkdown.rstudio.com/flexdashboard/)

<br>

# Data

  - [Awesome public datasets](https://github.com/awesomedata/awesome-public-datasets)
  
<br>

# Markdown Syntax

<br>

# Other Languages

## SQL

### Option 1
Create connection chunk, then call connection in each subsequent chunk.
```{r}
library(DBI)

pass <- readLines("../../pwd.txt")

db = dbConnect(
  RPostgres::Postgres(),
  dbname   = "personal",
  host     = "localhost",
  port     = 5432,
  user     = "cgrant",
  password = pass
)
```

```{sql, connection=db}
select * from sleepdata
```

### Option 2
Set default connection in the setup chunk (pretend its the setup chunk).
```{r setup-v2, eval=F}
library(DBI)
db = dbConnect(
  RPostgres::Postgres(),
  dbname   = "personal",
  host     = "localhost",
  port     = 5432,
  user     = "cgrant",
  password = pass
)
knitr::opts_chunk$set(connection = "db")
```

Then you dont have to specify the connection for each chunk.
```{sql, eval=F}
select * from sleepdata
```

<br>

## Python
To use the Python engine, you need to call `library(reticulate)` [link](https://rstudio.github.io/reticulate/)
```{r}
# install.packages("reticulate")
library(reticulate)

# Use specific Python installation
use_python("C:/Python37")

# Use conda environment
use_condaenv("dev")
```

Now you can run Python code
```{python}
x = 4 * 4
print(x)
```

You can import libraries as normal
```{python}
import pandas as pd

vals = {"col1": ['a', 'b', 'c', 'd'], "col2": [1, 10, 100, 1000]}
df = pd.DataFrame(vals)
```

Access objects created within Python chunks from R using `py$<var>`
```{r}
library(DT)
dt = datatable(py$df)
dt
```


